fix: resolve 500 error with Netlify Identity integration

- Add robust JWT token decoding with proper padding handling
- Properly use Netlify clientContext for identity info
- Add extensive logging to diagnose function issues
- Fix error handling for better debugging
- Ensure smooth experience for both authenticated and anonymous users
- Prevent duplicate upvotes more reliably

This should fix the 500 Internal Server Error seen when upvoting stories.
